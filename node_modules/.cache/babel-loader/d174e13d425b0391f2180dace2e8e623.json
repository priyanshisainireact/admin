{"ast":null,"code":"'use strict'; // Load modules\n\nvar _defineProperty = require(\"/home/cloudmynds/Desktop/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/defineProperty\");\n\nvar _classCallCheck = require(\"/home/cloudmynds/Desktop/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _assertThisInitialized = require(\"/home/cloudmynds/Desktop/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/assertThisInitialized\");\n\nvar _inherits = require(\"/home/cloudmynds/Desktop/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/inherits\");\n\nvar _createSuper = require(\"/home/cloudmynds/Desktop/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createSuper\");\n\nvar _toConsumableArray = require(\"/home/cloudmynds/Desktop/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/toConsumableArray\");\n\nvar Hoek = require('hoek');\n\nvar Any = require('./types/any');\n\nvar Cast = require('./cast');\n\nvar Errors = require('./errors');\n\nvar Lazy = require('./types/lazy');\n\nvar Ref = require('./ref');\n\nvar Settings = require('./types/any/settings'); // Declare internals\n\n\nvar internals = {\n  alternatives: require('./types/alternatives'),\n  array: require('./types/array'),\n  boolean: require('./types/boolean'),\n  binary: require('./types/binary'),\n  date: require('./types/date'),\n  func: require('./types/func'),\n  number: require('./types/number'),\n  object: require('./types/object'),\n  string: require('./types/string'),\n  symbol: require('./types/symbol')\n};\n\ninternals.callWithDefaults = function (schema, args) {\n  var _schema;\n\n  Hoek.assert(this, 'Must be invoked on a Joi instance.');\n\n  if (this._defaults) {\n    schema = this._defaults(schema);\n  }\n\n  schema._currentJoi = this;\n  return (_schema = schema)._init.apply(_schema, _toConsumableArray(args));\n};\n\ninternals.root = function () {\n  var any = new Any();\n  var root = any.clone();\n  Any.prototype._currentJoi = root;\n  root._currentJoi = root;\n\n  root.any = function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    Hoek.assert(args.length === 0, 'Joi.any() does not allow arguments.');\n    return internals.callWithDefaults.call(this, any, args);\n  };\n\n  root.alternatives = root.alt = function () {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    return internals.callWithDefaults.call(this, internals.alternatives, args);\n  };\n\n  root.array = function () {\n    for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      args[_key3] = arguments[_key3];\n    }\n\n    Hoek.assert(args.length === 0, 'Joi.array() does not allow arguments.');\n    return internals.callWithDefaults.call(this, internals.array, args);\n  };\n\n  root.boolean = root.bool = function () {\n    for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n      args[_key4] = arguments[_key4];\n    }\n\n    Hoek.assert(args.length === 0, 'Joi.boolean() does not allow arguments.');\n    return internals.callWithDefaults.call(this, internals.boolean, args);\n  };\n\n  root.binary = function () {\n    for (var _len5 = arguments.length, args = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n      args[_key5] = arguments[_key5];\n    }\n\n    Hoek.assert(args.length === 0, 'Joi.binary() does not allow arguments.');\n    return internals.callWithDefaults.call(this, internals.binary, args);\n  };\n\n  root.date = function () {\n    for (var _len6 = arguments.length, args = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n      args[_key6] = arguments[_key6];\n    }\n\n    Hoek.assert(args.length === 0, 'Joi.date() does not allow arguments.');\n    return internals.callWithDefaults.call(this, internals.date, args);\n  };\n\n  root.func = function () {\n    for (var _len7 = arguments.length, args = new Array(_len7), _key7 = 0; _key7 < _len7; _key7++) {\n      args[_key7] = arguments[_key7];\n    }\n\n    Hoek.assert(args.length === 0, 'Joi.func() does not allow arguments.');\n    return internals.callWithDefaults.call(this, internals.func, args);\n  };\n\n  root.number = function () {\n    for (var _len8 = arguments.length, args = new Array(_len8), _key8 = 0; _key8 < _len8; _key8++) {\n      args[_key8] = arguments[_key8];\n    }\n\n    Hoek.assert(args.length === 0, 'Joi.number() does not allow arguments.');\n    return internals.callWithDefaults.call(this, internals.number, args);\n  };\n\n  root.object = function () {\n    for (var _len9 = arguments.length, args = new Array(_len9), _key9 = 0; _key9 < _len9; _key9++) {\n      args[_key9] = arguments[_key9];\n    }\n\n    return internals.callWithDefaults.call(this, internals.object, args);\n  };\n\n  root.string = function () {\n    for (var _len10 = arguments.length, args = new Array(_len10), _key10 = 0; _key10 < _len10; _key10++) {\n      args[_key10] = arguments[_key10];\n    }\n\n    Hoek.assert(args.length === 0, 'Joi.string() does not allow arguments.');\n    return internals.callWithDefaults.call(this, internals.string, args);\n  };\n\n  root.symbol = function () {\n    for (var _len11 = arguments.length, args = new Array(_len11), _key11 = 0; _key11 < _len11; _key11++) {\n      args[_key11] = arguments[_key11];\n    }\n\n    Hoek.assert(args.length === 0, 'Joi.symbol() does not allow arguments.');\n    return internals.callWithDefaults.call(this, internals.symbol, args);\n  };\n\n  root.ref = function () {\n    return Ref.create.apply(Ref, arguments);\n  };\n\n  root.isRef = function (ref) {\n    return Ref.isRef(ref);\n  };\n\n  root.validate = function (value)\n  /*, [schema], [options], callback */\n  {\n    var _ref;\n\n    var last = (_ref = (arguments.length <= 1 ? 0 : arguments.length - 1) - 1 + 1, _ref < 1 || arguments.length <= _ref ? undefined : arguments[_ref]);\n    var callback = typeof last === 'function' ? last : null;\n    var count = (arguments.length <= 1 ? 0 : arguments.length - 1) - (callback ? 1 : 0);\n\n    if (count === 0) {\n      return any.validate(value, callback);\n    }\n\n    var options = count === 2 ? arguments.length <= 2 ? undefined : arguments[2] : undefined;\n    var schema = root.compile(arguments.length <= 1 ? undefined : arguments[1]);\n    return schema._validateWithOptions(value, options, callback);\n  };\n\n  root.describe = function () {\n    var schema = arguments.length ? root.compile(arguments.length <= 0 ? undefined : arguments[0]) : any;\n    return schema.describe();\n  };\n\n  root.compile = function (schema) {\n    try {\n      return Cast.schema(this, schema);\n    } catch (err) {\n      if (err.hasOwnProperty('path')) {\n        err.message = err.message + '(' + err.path + ')';\n      }\n\n      throw err;\n    }\n  };\n\n  root.assert = function (value, schema, message) {\n    root.attempt(value, schema, message);\n  };\n\n  root.attempt = function (value, schema, message) {\n    var result = root.validate(value, schema);\n    var error = result.error;\n\n    if (error) {\n      if (!message) {\n        if (typeof error.annotate === 'function') {\n          error.message = error.annotate();\n        }\n\n        throw error;\n      }\n\n      if (!(message instanceof Error)) {\n        if (typeof error.annotate === 'function') {\n          error.message = \"\".concat(message, \" \").concat(error.annotate());\n        }\n\n        throw error;\n      }\n\n      throw message;\n    }\n\n    return result.value;\n  };\n\n  root.reach = function (schema, path) {\n    Hoek.assert(schema && schema instanceof Any, 'you must provide a joi schema');\n    Hoek.assert(Array.isArray(path) || typeof path === 'string', 'path must be a string or an array of strings');\n\n    var reach = function reach(sourceSchema, schemaPath) {\n      if (!schemaPath.length) {\n        return sourceSchema;\n      }\n\n      var children = sourceSchema._inner.children;\n\n      if (!children) {\n        return;\n      }\n\n      var key = schemaPath.shift();\n\n      for (var i = 0; i < children.length; ++i) {\n        var child = children[i];\n\n        if (child.key === key) {\n          return reach(child.schema, schemaPath);\n        }\n      }\n    };\n\n    var schemaPath = typeof path === 'string' ? path ? path.split('.') : [] : path.slice();\n    return reach(schema, schemaPath);\n  };\n\n  root.lazy = function (fn) {\n    return Lazy.set(fn);\n  };\n\n  root.defaults = function (fn) {\n    var _this = this;\n\n    Hoek.assert(typeof fn === 'function', 'Defaults must be a function');\n    var joi = Object.create(this.any());\n    joi = fn(joi);\n    Hoek.assert(joi && joi instanceof this.constructor, 'defaults() must return a schema');\n    Object.assign(joi, this, joi.clone()); // Re-add the types from `this` but also keep the settings from joi's potential new defaults\n\n    joi._defaults = function (schema) {\n      if (_this._defaults) {\n        schema = _this._defaults(schema);\n        Hoek.assert(schema instanceof _this.constructor, 'defaults() must return a schema');\n      }\n\n      schema = fn(schema);\n      Hoek.assert(schema instanceof _this.constructor, 'defaults() must return a schema');\n      return schema;\n    };\n\n    return joi;\n  };\n\n  root.extend = function () {\n    var _this2 = this;\n\n    for (var _len12 = arguments.length, args = new Array(_len12), _key12 = 0; _key12 < _len12; _key12++) {\n      args[_key12] = arguments[_key12];\n    }\n\n    var extensions = Hoek.flatten(args);\n    Hoek.assert(extensions.length > 0, 'You need to provide at least one extension');\n    this.assert(extensions, root.extensionsSchema);\n    var joi = Object.create(this.any());\n    Object.assign(joi, this);\n\n    var _loop = function _loop(i) {\n      var extension = extensions[i];\n\n      if (typeof extension === 'function') {\n        extension = extension(joi);\n      }\n\n      _this2.assert(extension, root.extensionSchema);\n\n      var base = (extension.base || _this2.any()).clone(); // Cloning because we're going to override language afterwards\n\n\n      var ctor = base.constructor;\n\n      var type = /*#__PURE__*/function (_ctor) {\n        _inherits(type, _ctor);\n\n        var _super = _createSuper(type);\n\n        // eslint-disable-line no-loop-func\n        function type() {\n          var _this3;\n\n          _classCallCheck(this, type);\n\n          _this3 = _super.call(this);\n\n          if (extension.base) {\n            Object.assign(_assertThisInitialized(_this3), base);\n          }\n\n          _this3._type = extension.name;\n\n          if (extension.language) {\n            _this3._settings = Settings.concat(_this3._settings, {\n              language: _defineProperty({}, extension.name, extension.language)\n            });\n          }\n\n          return _this3;\n        }\n\n        return type;\n      }(ctor);\n\n      if (extension.coerce) {\n        type.prototype._coerce = function (value, state, options) {\n          if (ctor.prototype._coerce) {\n            var baseRet = ctor.prototype._coerce.call(this, value, state, options);\n\n            if (baseRet.errors) {\n              return baseRet;\n            }\n\n            value = baseRet.value;\n          }\n\n          var ret = extension.coerce.call(this, value, state, options);\n\n          if (ret instanceof Errors.Err) {\n            return {\n              value: value,\n              errors: ret\n            };\n          }\n\n          return {\n            value: ret\n          };\n        };\n      }\n\n      if (extension.pre) {\n        type.prototype._base = function (value, state, options) {\n          if (ctor.prototype._base) {\n            var baseRet = ctor.prototype._base.call(this, value, state, options);\n\n            if (baseRet.errors) {\n              return baseRet;\n            }\n\n            value = baseRet.value;\n          }\n\n          var ret = extension.pre.call(this, value, state, options);\n\n          if (ret instanceof Errors.Err) {\n            return {\n              value: value,\n              errors: ret\n            };\n          }\n\n          return {\n            value: ret\n          };\n        };\n      }\n\n      if (extension.rules) {\n        var _loop2 = function _loop2(j) {\n          var rule = extension.rules[j];\n          var ruleArgs = rule.params ? rule.params instanceof Any ? rule.params._inner.children.map(function (k) {\n            return k.key;\n          }) : Object.keys(rule.params) : [];\n          var validateArgs = rule.params ? Cast.schema(_this2, rule.params) : null;\n\n          type.prototype[rule.name] = function () {\n            for (var _len13 = arguments.length, rArgs = new Array(_len13), _key13 = 0; _key13 < _len13; _key13++) {\n              rArgs[_key13] = arguments[_key13];\n            }\n\n            // eslint-disable-line no-loop-func\n            if (rArgs.length > ruleArgs.length) {\n              throw new Error('Unexpected number of arguments');\n            }\n\n            var hasRef = false;\n            var arg = {};\n\n            for (var k = 0; k < ruleArgs.length; ++k) {\n              arg[ruleArgs[k]] = rArgs[k];\n\n              if (!hasRef && Ref.isRef(rArgs[k])) {\n                hasRef = true;\n              }\n            }\n\n            if (validateArgs) {\n              arg = joi.attempt(arg, validateArgs);\n            }\n\n            var schema;\n\n            if (rule.validate) {\n              var validate = function validate(value, state, options) {\n                return rule.validate.call(this, arg, value, state, options);\n              };\n\n              schema = this._test(rule.name, arg, validate, {\n                description: rule.description,\n                hasRef: hasRef\n              });\n            } else {\n              schema = this.clone();\n            }\n\n            if (rule.setup) {\n              var newSchema = rule.setup.call(schema, arg);\n\n              if (newSchema !== undefined) {\n                Hoek.assert(newSchema instanceof Any, \"Setup of extension Joi.\".concat(this._type, \"().\").concat(rule.name, \"() must return undefined or a Joi object\"));\n                schema = newSchema;\n              }\n            }\n\n            return schema;\n          };\n        };\n\n        for (var j = 0; j < extension.rules.length; ++j) {\n          _loop2(j);\n        }\n      }\n\n      if (extension.describe) {\n        type.prototype.describe = function () {\n          var description = ctor.prototype.describe.call(this);\n          return extension.describe.call(this, description);\n        };\n      }\n\n      var instance = new type();\n\n      joi[extension.name] = function () {\n        for (var _len14 = arguments.length, extArgs = new Array(_len14), _key14 = 0; _key14 < _len14; _key14++) {\n          extArgs[_key14] = arguments[_key14];\n        }\n\n        return internals.callWithDefaults.call(this, instance, extArgs);\n      };\n    };\n\n    for (var i = 0; i < extensions.length; ++i) {\n      _loop(i);\n    }\n\n    return joi;\n  };\n\n  root.extensionSchema = internals.object.keys({\n    base: internals.object.type(Any, 'Joi object'),\n    name: internals.string.required(),\n    coerce: internals.func.arity(3),\n    pre: internals.func.arity(3),\n    language: internals.object,\n    describe: internals.func.arity(1),\n    rules: internals.array.items(internals.object.keys({\n      name: internals.string.required(),\n      setup: internals.func.arity(1),\n      validate: internals.func.arity(4),\n      params: [internals.object.pattern(/.*/, internals.object.type(Any, 'Joi object')), internals.object.type(internals.object.constructor, 'Joi object')],\n      description: [internals.string, internals.func.arity(1)]\n    }).or('setup', 'validate'))\n  }).strict();\n  root.extensionsSchema = internals.array.items([internals.object, internals.func.arity(1)]).strict();\n  root.version = require('../package.json').version;\n  return root;\n};\n\nmodule.exports = internals.root();","map":{"version":3,"sources":["/home/cloudmynds/Desktop/admin/node_modules/joi/lib/index.js"],"names":["Hoek","require","Any","Cast","Errors","Lazy","Ref","Settings","internals","alternatives","array","boolean","binary","date","func","number","object","string","symbol","callWithDefaults","schema","args","assert","_defaults","_currentJoi","_init","root","any","clone","prototype","length","call","alt","bool","ref","create","isRef","validate","value","last","callback","count","options","undefined","compile","_validateWithOptions","describe","err","hasOwnProperty","message","path","attempt","result","error","annotate","Error","reach","Array","isArray","sourceSchema","schemaPath","children","_inner","key","shift","i","child","split","slice","lazy","fn","set","defaults","joi","Object","constructor","assign","extend","extensions","flatten","extensionsSchema","extension","extensionSchema","base","ctor","type","_type","name","language","_settings","concat","coerce","_coerce","state","baseRet","errors","ret","Err","pre","_base","rules","j","rule","ruleArgs","params","map","k","keys","validateArgs","rArgs","hasRef","arg","_test","description","setup","newSchema","instance","extArgs","required","arity","items","pattern","or","strict","version","module","exports"],"mappings":"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","sourcesContent":["'use strict';\n\n// Load modules\n\nconst Hoek = require('hoek');\nconst Any = require('./types/any');\nconst Cast = require('./cast');\nconst Errors = require('./errors');\nconst Lazy = require('./types/lazy');\nconst Ref = require('./ref');\nconst Settings = require('./types/any/settings');\n\n\n// Declare internals\n\nconst internals = {\n    alternatives: require('./types/alternatives'),\n    array: require('./types/array'),\n    boolean: require('./types/boolean'),\n    binary: require('./types/binary'),\n    date: require('./types/date'),\n    func: require('./types/func'),\n    number: require('./types/number'),\n    object: require('./types/object'),\n    string: require('./types/string'),\n    symbol: require('./types/symbol')\n};\n\ninternals.callWithDefaults = function (schema, args) {\n\n    Hoek.assert(this, 'Must be invoked on a Joi instance.');\n\n    if (this._defaults) {\n        schema = this._defaults(schema);\n    }\n\n    schema._currentJoi = this;\n\n    return schema._init(...args);\n};\n\ninternals.root = function () {\n\n    const any = new Any();\n\n    const root = any.clone();\n    Any.prototype._currentJoi = root;\n    root._currentJoi = root;\n\n    root.any = function (...args) {\n\n        Hoek.assert(args.length === 0, 'Joi.any() does not allow arguments.');\n\n        return internals.callWithDefaults.call(this, any, args);\n    };\n\n    root.alternatives = root.alt = function (...args) {\n\n        return internals.callWithDefaults.call(this, internals.alternatives, args);\n    };\n\n    root.array = function (...args) {\n\n        Hoek.assert(args.length === 0, 'Joi.array() does not allow arguments.');\n\n        return internals.callWithDefaults.call(this, internals.array, args);\n    };\n\n    root.boolean = root.bool = function (...args) {\n\n        Hoek.assert(args.length === 0, 'Joi.boolean() does not allow arguments.');\n\n        return internals.callWithDefaults.call(this, internals.boolean, args);\n    };\n\n    root.binary = function (...args) {\n\n        Hoek.assert(args.length === 0, 'Joi.binary() does not allow arguments.');\n\n        return internals.callWithDefaults.call(this, internals.binary, args);\n    };\n\n    root.date = function (...args) {\n\n        Hoek.assert(args.length === 0, 'Joi.date() does not allow arguments.');\n\n        return internals.callWithDefaults.call(this, internals.date, args);\n    };\n\n    root.func = function (...args) {\n\n        Hoek.assert(args.length === 0, 'Joi.func() does not allow arguments.');\n\n        return internals.callWithDefaults.call(this, internals.func, args);\n    };\n\n    root.number = function (...args) {\n\n        Hoek.assert(args.length === 0, 'Joi.number() does not allow arguments.');\n\n        return internals.callWithDefaults.call(this, internals.number, args);\n    };\n\n    root.object = function (...args) {\n\n        return internals.callWithDefaults.call(this, internals.object, args);\n    };\n\n    root.string = function (...args) {\n\n        Hoek.assert(args.length === 0, 'Joi.string() does not allow arguments.');\n\n        return internals.callWithDefaults.call(this, internals.string, args);\n    };\n\n    root.symbol = function (...args) {\n\n        Hoek.assert(args.length === 0, 'Joi.symbol() does not allow arguments.');\n\n        return internals.callWithDefaults.call(this, internals.symbol, args);\n    };\n\n    root.ref = function (...args) {\n\n        return Ref.create(...args);\n    };\n\n    root.isRef = function (ref) {\n\n        return Ref.isRef(ref);\n    };\n\n    root.validate = function (value, ...args /*, [schema], [options], callback */) {\n\n        const last = args[args.length - 1];\n        const callback = typeof last === 'function' ? last : null;\n\n        const count = args.length - (callback ? 1 : 0);\n        if (count === 0) {\n            return any.validate(value, callback);\n        }\n\n        const options = count === 2 ? args[1] : undefined;\n        const schema = root.compile(args[0]);\n\n        return schema._validateWithOptions(value, options, callback);\n    };\n\n    root.describe = function (...args) {\n\n        const schema = args.length ? root.compile(args[0]) : any;\n        return schema.describe();\n    };\n\n    root.compile = function (schema) {\n\n        try {\n            return Cast.schema(this, schema);\n        }\n        catch (err) {\n            if (err.hasOwnProperty('path')) {\n                err.message = err.message + '(' + err.path + ')';\n            }\n            throw err;\n        }\n    };\n\n    root.assert = function (value, schema, message) {\n\n        root.attempt(value, schema, message);\n    };\n\n    root.attempt = function (value, schema, message) {\n\n        const result = root.validate(value, schema);\n        const error = result.error;\n        if (error) {\n            if (!message) {\n                if (typeof error.annotate === 'function') {\n                    error.message = error.annotate();\n                }\n                throw error;\n            }\n\n            if (!(message instanceof Error)) {\n                if (typeof error.annotate === 'function') {\n                    error.message = `${message} ${error.annotate()}`;\n                }\n                throw error;\n            }\n\n            throw message;\n        }\n\n        return result.value;\n    };\n\n    root.reach = function (schema, path) {\n\n        Hoek.assert(schema && schema instanceof Any, 'you must provide a joi schema');\n        Hoek.assert(Array.isArray(path) || typeof path === 'string', 'path must be a string or an array of strings');\n\n        const reach = (sourceSchema, schemaPath) => {\n\n            if (!schemaPath.length) {\n                return sourceSchema;\n            }\n\n            const children = sourceSchema._inner.children;\n            if (!children) {\n                return;\n            }\n\n            const key = schemaPath.shift();\n            for (let i = 0; i < children.length; ++i) {\n                const child = children[i];\n                if (child.key === key) {\n                    return reach(child.schema, schemaPath);\n                }\n            }\n        };\n\n        const schemaPath = typeof path === 'string' ? (path ? path.split('.') : []) : path.slice();\n\n        return reach(schema, schemaPath);\n    };\n\n    root.lazy = function (fn) {\n\n        return Lazy.set(fn);\n    };\n\n    root.defaults = function (fn) {\n\n        Hoek.assert(typeof fn === 'function', 'Defaults must be a function');\n\n        let joi = Object.create(this.any());\n        joi = fn(joi);\n\n        Hoek.assert(joi && joi instanceof this.constructor, 'defaults() must return a schema');\n\n        Object.assign(joi, this, joi.clone()); // Re-add the types from `this` but also keep the settings from joi's potential new defaults\n\n        joi._defaults = (schema) => {\n\n            if (this._defaults) {\n                schema = this._defaults(schema);\n                Hoek.assert(schema instanceof this.constructor, 'defaults() must return a schema');\n            }\n\n            schema = fn(schema);\n            Hoek.assert(schema instanceof this.constructor, 'defaults() must return a schema');\n            return schema;\n        };\n\n        return joi;\n    };\n\n    root.extend = function (...args) {\n\n        const extensions = Hoek.flatten(args);\n        Hoek.assert(extensions.length > 0, 'You need to provide at least one extension');\n\n        this.assert(extensions, root.extensionsSchema);\n\n        const joi = Object.create(this.any());\n        Object.assign(joi, this);\n\n        for (let i = 0; i < extensions.length; ++i) {\n            let extension = extensions[i];\n\n            if (typeof extension === 'function') {\n                extension = extension(joi);\n            }\n\n            this.assert(extension, root.extensionSchema);\n\n            const base = (extension.base || this.any()).clone(); // Cloning because we're going to override language afterwards\n            const ctor = base.constructor;\n            const type = class extends ctor { // eslint-disable-line no-loop-func\n\n                constructor() {\n\n                    super();\n                    if (extension.base) {\n                        Object.assign(this, base);\n                    }\n\n                    this._type = extension.name;\n\n                    if (extension.language) {\n                        this._settings = Settings.concat(this._settings, {\n                            language: {\n                                [extension.name]: extension.language\n                            }\n                        });\n                    }\n                }\n\n            };\n\n            if (extension.coerce) {\n                type.prototype._coerce = function (value, state, options) {\n\n                    if (ctor.prototype._coerce) {\n                        const baseRet = ctor.prototype._coerce.call(this, value, state, options);\n\n                        if (baseRet.errors) {\n                            return baseRet;\n                        }\n\n                        value = baseRet.value;\n                    }\n\n                    const ret = extension.coerce.call(this, value, state, options);\n                    if (ret instanceof Errors.Err) {\n                        return { value, errors: ret };\n                    }\n\n                    return { value: ret };\n                };\n            }\n            if (extension.pre) {\n                type.prototype._base = function (value, state, options) {\n\n                    if (ctor.prototype._base) {\n                        const baseRet = ctor.prototype._base.call(this, value, state, options);\n\n                        if (baseRet.errors) {\n                            return baseRet;\n                        }\n\n                        value = baseRet.value;\n                    }\n\n                    const ret = extension.pre.call(this, value, state, options);\n                    if (ret instanceof Errors.Err) {\n                        return { value, errors: ret };\n                    }\n\n                    return { value: ret };\n                };\n            }\n\n            if (extension.rules) {\n                for (let j = 0; j < extension.rules.length; ++j) {\n                    const rule = extension.rules[j];\n                    const ruleArgs = rule.params ?\n                        (rule.params instanceof Any ? rule.params._inner.children.map((k) => k.key) : Object.keys(rule.params)) :\n                        [];\n                    const validateArgs = rule.params ? Cast.schema(this, rule.params) : null;\n\n                    type.prototype[rule.name] = function (...rArgs) { // eslint-disable-line no-loop-func\n\n                        if (rArgs.length > ruleArgs.length) {\n                            throw new Error('Unexpected number of arguments');\n                        }\n\n                        let hasRef = false;\n                        let arg = {};\n\n                        for (let k = 0; k < ruleArgs.length; ++k) {\n                            arg[ruleArgs[k]] = rArgs[k];\n                            if (!hasRef && Ref.isRef(rArgs[k])) {\n                                hasRef = true;\n                            }\n                        }\n\n                        if (validateArgs) {\n                            arg = joi.attempt(arg, validateArgs);\n                        }\n\n                        let schema;\n                        if (rule.validate) {\n                            const validate = function (value, state, options) {\n\n                                return rule.validate.call(this, arg, value, state, options);\n                            };\n\n                            schema = this._test(rule.name, arg, validate, {\n                                description: rule.description,\n                                hasRef\n                            });\n                        }\n                        else {\n                            schema = this.clone();\n                        }\n\n                        if (rule.setup) {\n                            const newSchema = rule.setup.call(schema, arg);\n                            if (newSchema !== undefined) {\n                                Hoek.assert(newSchema instanceof Any, `Setup of extension Joi.${this._type}().${rule.name}() must return undefined or a Joi object`);\n                                schema = newSchema;\n                            }\n                        }\n\n                        return schema;\n                    };\n                }\n            }\n\n            if (extension.describe) {\n                type.prototype.describe = function () {\n\n                    const description = ctor.prototype.describe.call(this);\n                    return extension.describe.call(this, description);\n                };\n            }\n\n            const instance = new type();\n            joi[extension.name] = function (...extArgs) {\n\n                return internals.callWithDefaults.call(this, instance, extArgs);\n            };\n        }\n\n        return joi;\n    };\n\n    root.extensionSchema = internals.object.keys({\n        base: internals.object.type(Any, 'Joi object'),\n        name: internals.string.required(),\n        coerce: internals.func.arity(3),\n        pre: internals.func.arity(3),\n        language: internals.object,\n        describe: internals.func.arity(1),\n        rules: internals.array.items(internals.object.keys({\n            name: internals.string.required(),\n            setup: internals.func.arity(1),\n            validate: internals.func.arity(4),\n            params: [\n                internals.object.pattern(/.*/, internals.object.type(Any, 'Joi object')),\n                internals.object.type(internals.object.constructor, 'Joi object')\n            ],\n            description: [internals.string, internals.func.arity(1)]\n        }).or('setup', 'validate'))\n    }).strict();\n\n    root.extensionsSchema = internals.array.items([internals.object, internals.func.arity(1)]).strict();\n\n    root.version = require('../package.json').version;\n\n    return root;\n};\n\n\nmodule.exports = internals.root();\n"]},"metadata":{},"sourceType":"script"}